# **GLB Processing Pipeline**

## **Overview**

The **GLB Processing Pipeline** is a Python-based pipeline designed to download, validate, and convert 3D GLB files from the **Objaverse** dataset into OBJ format. It also includes functionality for extracting PBR (Physically Based Rendering) textures from the GLB files. This pipeline is built to work efficiently with large datasets and supports parallelized processing to improve performance.

## **Features**

- Download GLB files from the Objaverse dataset.
- Validate the downloaded GLB files for issues like mesh integrity.
- Extract PBR textures (Base Color, Metallic Roughness, Normal Maps) from GLB files.
- Convert valid GLB files into OBJ format.
- Supports parallel processing to speed up the pipeline.
- Organizes the dataset and metadata in a structured manner.
- Logging and error tracking for easy debugging and monitoring.
- Unit tests to ensure the pipeline functions as expected.

## **Installation**

### **Clone the Repository**

Clone the repository to your local machine:

```bash
git clone https://github.com/v0nerd/3D_Data_Processing.git
cd 3D_Data_Processing
```

### **Set Up the Virtual Environment**

1. Create a virtual environment:

   ```bash
   python3 -m venv venv
   ```

2. Activate the virtual environment:

   - On Linux/macOS:

     ```bash
     source venv/bin/activate
     ```

   - On Windows:

     ```bash
     venv\Scripts\activate
     ```

### **Install Dependencies**

Use `pip` to install the required dependencies:

```bash
pip install -r requirements.txt
```

---

## **Configuration**

The pipeline relies on configuration files and expects specific data to be placed in the `datasets/` directory.

### **1. `datasets/` Directory**

Ensure the following files exist in the `datasets/` directory:

- **`gobjaverse_index_to_objaverse.json`**: A JSON file containing a mapping of indices to Objaverse IDs.
- **`non-monotonous_images_all.json`**: A JSON file containing a list of non-monotonous images from Objaverse.
- **`all_ids.json`**: A JSON file storing all model IDs (generated by the pipeline).

The `datasets/` folder structure should look like this:

```
datasets/
â”œâ”€â”€ gobjaverse_index_to_objaverse.json
â”œâ”€â”€ non-monotonous_images_all.json
â””â”€â”€ all_ids.json
```

### **2. Logging Configuration**

The logging configuration is stored in **`config/logging_config.json`**. This configuration controls how logs are displayed in the console and written to the log file.

---

## **Usage**

### **Run the Pipeline**

To run the pipeline, execute the following command:

```bash
python src/main.py
```

This will:

- Download models from Objaverse.
- Validate the downloaded GLB files.
- Extract PBR textures.
- Convert valid GLB files to OBJ format.
- Store processed models in the `datasets/` directory.

The logs of the process will be saved to **`glb_processing.log`**.

### **Run Tests**

To ensure everything is working as expected, you can run the unit tests with `unittest`:

```bash
python -m unittest discover tests
```

This will run all the unit tests in the `tests/` directory. It ensures that:

- The GLB validator works correctly.
- Texture extraction functions as expected.
- The main processing script operates without errors.

### **Test Specific Components**

You can run specific tests by specifying the test file:

```bash
python -m unittest tests.test_glb_validator
python -m unittest tests.test_texture_extractor
python -m unittest tests.test_main
```

---

## **File Structure**

Hereâ€™s a breakdown of the directory structure:

```
GLB-Processing-Pipeline/
â”œâ”€â”€ src/                              # Core project code
â”‚   â”œâ”€â”€ glb_checker/                  # GLB validation and utilities
â”‚   â”‚   â”œâ”€â”€ glb_validator.py          # GLB validation logic
â”‚   â”‚   â””â”€â”€ utils.py                  # Helper functions (e.g., JSON handling)
â”‚   â”œâ”€â”€ pbr_extraction/               # PBR texture extraction
â”‚   â”‚   â””â”€â”€ texture_extractor.py      # Function to extract PBR textures
â”‚   â”œâ”€â”€ main.py                       # Main script to run the pipeline
â”œâ”€â”€ datasets/                         # Directory for downloaded models and metadata
â”‚   â”œâ”€â”€ gobjaverse_index_to_objaverse.json  # Mapping of indices to Objaverse IDs
â”‚   â”œâ”€â”€ non-monotonous_images_all.json   # List of non-monotonous images
â”‚   â””â”€â”€ all_ids.json                  # List of all model IDs
â”œâ”€â”€ config/                           # Configuration files
â”‚   â”œâ”€â”€ config.json                   # Pipeline settings
â”‚   â”œâ”€â”€ logging_config.json           # Logging configuration
â”œâ”€â”€ docs/                             # Documentation (usage guides, setup)
â”‚   â”œâ”€â”€ installation.md               # Installation instructions
â”‚   â”œâ”€â”€ usage.md                      # Usage instructions
â”œâ”€â”€ tests/                            # Unit tests
â”‚   â”œâ”€â”€ test_glb_validator.py         # Test for GLB validation
â”‚   â”œâ”€â”€ test_texture_extractor.py     # Test for texture extraction
â”‚   â””â”€â”€ test_main.py                  # Test for the main script
â”œâ”€â”€ .gitignore                        # Git ignore file
â”œâ”€â”€ requirements.txt                  # Python dependencies
â”œâ”€â”€ README.md                         # Project description and setup instructions
â””â”€â”€ LICENSE                           # License file (MIT)
```

---

## **License**

This project is licensed under the **MIT License**. See the [LICENSE](LICENSE) file for details.

---

## **Contributing**

If you'd like to contribute to this project, please fork the repository and submit a pull request. Make sure to run the tests and ensure everything works before submitting changes.

---

### ðŸš€ **Get Started** and Happy Coding! ðŸš€
